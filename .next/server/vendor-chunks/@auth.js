"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@auth";
exports.ids = ["vendor-chunks/@auth"];
exports.modules = {

/***/ "(rsc)/./node_modules/@auth/mongodb-adapter/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/@auth/mongodb-adapter/index.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MongoDBAdapter: () => (/* binding */ MongoDBAdapter),\n/* harmony export */   _id: () => (/* binding */ _id),\n/* harmony export */   defaultCollections: () => (/* binding */ defaultCollections),\n/* harmony export */   format: () => (/* binding */ format)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\nvar __addDisposableResource = (undefined && undefined.__addDisposableResource) || function (env, value, async) {\n    if (value !== null && value !== void 0) {\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n        var dispose;\n        if (async) {\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n            dispose = value[Symbol.asyncDispose];\n        }\n        if (dispose === void 0) {\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n            dispose = value[Symbol.dispose];\n        }\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n        env.stack.push({ value: value, dispose: dispose, async: async });\n    }\n    else if (async) {\n        env.stack.push({ async: true });\n    }\n    return value;\n};\nvar __disposeResources = (undefined && undefined.__disposeResources) || (function (SuppressedError) {\n    return function (env) {\n        function fail(e) {\n            env.error = env.hasError ? new SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n            env.hasError = true;\n        }\n        function next() {\n            while (env.stack.length) {\n                var rec = env.stack.pop();\n                try {\n                    var result = rec.dispose && rec.dispose.call(rec.value);\n                    if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n                }\n                catch (e) {\n                    fail(e);\n                }\n            }\n            if (env.hasError) throw env.error;\n        }\n        return next();\n    };\n})(typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n    var e = new Error(message);\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n});\n/**\n * <div style={{display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\", padding: 16}}>\n *  <p>Official <a href=\"https://www.mongodb.com\">MongoDB</a> adapter for Auth.js / NextAuth.js.</p>\n *  <a href=\"https://www.mongodb.com\">\n *   <img style={{display: \"block\"}} src=\"https://authjs.dev/img/adapters/mongodb.svg\" width=\"30\" />\n *  </a>\n * </div>\n *\n * ## Installation\n *\n * ```bash npm2yarn\n * npm install @auth/mongodb-adapter mongodb\n * ```\n *\n * @module @auth/mongodb-adapter\n */\n\n/**\n * This adapter uses https://www.typescriptlang.org/docs/handbook/release-notes/typescript-5-2.html#using-declarations-and-explicit-resource-management.\n * This feature is very new and requires runtime polyfills for `Symbol.asyncDispose` in order to work properly in all environments.\n * It is also required to set in the `tsconfig.json` file the compilation target to `es2022` or below and configure the `lib` option to include `esnext` or `esnext.disposable`.\n *\n * You can find more information about this feature and the polyfills in the link above.\n */\n// @ts-expect-error read only property is not assignable\nSymbol.asyncDispose ?? (Symbol.asyncDispose = Symbol(\"Symbol.asyncDispose\"));\nconst defaultCollections = {\n    Users: \"users\",\n    Accounts: \"accounts\",\n    Sessions: \"sessions\",\n    VerificationTokens: \"verification_tokens\",\n};\nconst format = {\n    /** Takes a MongoDB object and returns a plain old JavaScript object */\n    from(object) {\n        const newObject = {};\n        for (const key in object) {\n            const value = object[key];\n            if (key === \"_id\") {\n                newObject.id = value.toHexString();\n            }\n            else if (key === \"userId\") {\n                newObject[key] = value.toHexString();\n            }\n            else {\n                newObject[key] = value;\n            }\n        }\n        return newObject;\n    },\n    /** Takes a plain old JavaScript object and turns it into a MongoDB object */\n    to(object) {\n        const newObject = {\n            _id: _id(object.id),\n        };\n        for (const key in object) {\n            const value = object[key];\n            if (key === \"userId\")\n                newObject[key] = _id(value);\n            else if (key === \"id\")\n                continue;\n            else\n                newObject[key] = value;\n        }\n        return newObject;\n    },\n};\n/** @internal */\nfunction _id(hex) {\n    if (hex?.length !== 24)\n        return new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId();\n    return new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(hex);\n}\nfunction MongoDBAdapter(\n/**\n * The MongoDB client. You can either pass a promise that resolves to a `MongoClient` or a function that returns a promise that resolves to a `MongoClient`.\n * Using a function that returns a `Promise<MongoClient>` could be useful in serverless environments, particularly when combined with `options.onClose`, to efficiently handle database connections and address challenges with persistence, container reuse, and connection closure.\n * These functions enable either straightforward open-close database connections or more complex caching and connection reuse strategies.\n */\nclient, options = {}) {\n    const { collections } = options;\n    const { from, to } = format;\n    const getDb = async () => {\n        const _client = await (typeof client === \"function\" ? client() : client);\n        const _db = _client.db(options.databaseName);\n        const c = { ...defaultCollections, ...collections };\n        return {\n            U: _db.collection(c.Users),\n            A: _db.collection(c.Accounts),\n            S: _db.collection(c.Sessions),\n            V: _db.collection(c?.VerificationTokens),\n            [Symbol.asyncDispose]: async () => {\n                await options.onClose?.(_client);\n            },\n        };\n    };\n    return {\n        async createUser(data) {\n            const env_1 = { stack: [], error: void 0, hasError: false };\n            try {\n                const user = to(data);\n                const db = __addDisposableResource(env_1, await getDb(), true);\n                await db.U.insertOne(user);\n                return from(user);\n            }\n            catch (e_1) {\n                env_1.error = e_1;\n                env_1.hasError = true;\n            }\n            finally {\n                const result_1 = __disposeResources(env_1);\n                if (result_1)\n                    await result_1;\n            }\n        },\n        async getUser(id) {\n            const env_2 = { stack: [], error: void 0, hasError: false };\n            try {\n                const db = __addDisposableResource(env_2, await getDb(), true);\n                const user = await db.U.findOne({ _id: _id(id) });\n                if (!user)\n                    return null;\n                return from(user);\n            }\n            catch (e_2) {\n                env_2.error = e_2;\n                env_2.hasError = true;\n            }\n            finally {\n                const result_2 = __disposeResources(env_2);\n                if (result_2)\n                    await result_2;\n            }\n        },\n        async getUserByEmail(email) {\n            const env_3 = { stack: [], error: void 0, hasError: false };\n            try {\n                const db = __addDisposableResource(env_3, await getDb(), true);\n                const user = await db.U.findOne({ email });\n                if (!user)\n                    return null;\n                return from(user);\n            }\n            catch (e_3) {\n                env_3.error = e_3;\n                env_3.hasError = true;\n            }\n            finally {\n                const result_3 = __disposeResources(env_3);\n                if (result_3)\n                    await result_3;\n            }\n        },\n        async getUserByAccount(provider_providerAccountId) {\n            const env_4 = { stack: [], error: void 0, hasError: false };\n            try {\n                const db = __addDisposableResource(env_4, await getDb(), true);\n                const account = await db.A.findOne(provider_providerAccountId);\n                if (!account)\n                    return null;\n                const user = await db.U.findOne({ _id: new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(account.userId) });\n                if (!user)\n                    return null;\n                return from(user);\n            }\n            catch (e_4) {\n                env_4.error = e_4;\n                env_4.hasError = true;\n            }\n            finally {\n                const result_4 = __disposeResources(env_4);\n                if (result_4)\n                    await result_4;\n            }\n        },\n        async updateUser(data) {\n            const env_5 = { stack: [], error: void 0, hasError: false };\n            try {\n                const { _id, ...user } = to(data);\n                const db = __addDisposableResource(env_5, await getDb(), true);\n                const result = await db.U.findOneAndUpdate({ _id }, { $set: user }, { returnDocument: \"after\" });\n                return from(result);\n            }\n            catch (e_5) {\n                env_5.error = e_5;\n                env_5.hasError = true;\n            }\n            finally {\n                const result_5 = __disposeResources(env_5);\n                if (result_5)\n                    await result_5;\n            }\n        },\n        async deleteUser(id) {\n            const env_6 = { stack: [], error: void 0, hasError: false };\n            try {\n                const userId = _id(id);\n                const db = __addDisposableResource(env_6, await getDb(), true);\n                await Promise.all([\n                    db.A.deleteMany({ userId: userId }),\n                    db.S.deleteMany({ userId: userId }),\n                    db.U.deleteOne({ _id: userId }),\n                ]);\n            }\n            catch (e_6) {\n                env_6.error = e_6;\n                env_6.hasError = true;\n            }\n            finally {\n                const result_6 = __disposeResources(env_6);\n                if (result_6)\n                    await result_6;\n            }\n        },\n        linkAccount: async (data) => {\n            const env_7 = { stack: [], error: void 0, hasError: false };\n            try {\n                const account = to(data);\n                const db = __addDisposableResource(env_7, await getDb(), true);\n                await db.A.insertOne(account);\n                return account;\n            }\n            catch (e_7) {\n                env_7.error = e_7;\n                env_7.hasError = true;\n            }\n            finally {\n                const result_7 = __disposeResources(env_7);\n                if (result_7)\n                    await result_7;\n            }\n        },\n        async unlinkAccount(provider_providerAccountId) {\n            const env_8 = { stack: [], error: void 0, hasError: false };\n            try {\n                const db = __addDisposableResource(env_8, await getDb(), true);\n                const account = await db.A.findOneAndDelete(provider_providerAccountId);\n                return from(account);\n            }\n            catch (e_8) {\n                env_8.error = e_8;\n                env_8.hasError = true;\n            }\n            finally {\n                const result_8 = __disposeResources(env_8);\n                if (result_8)\n                    await result_8;\n            }\n        },\n        async getSessionAndUser(sessionToken) {\n            const env_9 = { stack: [], error: void 0, hasError: false };\n            try {\n                const db = __addDisposableResource(env_9, await getDb(), true);\n                const session = await db.S.findOne({ sessionToken });\n                if (!session)\n                    return null;\n                const user = await db.U.findOne({ _id: new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(session.userId) });\n                if (!user)\n                    return null;\n                return {\n                    user: from(user),\n                    session: from(session),\n                };\n            }\n            catch (e_9) {\n                env_9.error = e_9;\n                env_9.hasError = true;\n            }\n            finally {\n                const result_9 = __disposeResources(env_9);\n                if (result_9)\n                    await result_9;\n            }\n        },\n        async createSession(data) {\n            const env_10 = { stack: [], error: void 0, hasError: false };\n            try {\n                const session = to(data);\n                const db = __addDisposableResource(env_10, await getDb(), true);\n                await db.S.insertOne(session);\n                return from(session);\n            }\n            catch (e_10) {\n                env_10.error = e_10;\n                env_10.hasError = true;\n            }\n            finally {\n                const result_10 = __disposeResources(env_10);\n                if (result_10)\n                    await result_10;\n            }\n        },\n        async updateSession(data) {\n            const env_11 = { stack: [], error: void 0, hasError: false };\n            try {\n                const { _id, ...session } = to(data);\n                const db = __addDisposableResource(env_11, await getDb(), true);\n                const updatedSession = await db.S.findOneAndUpdate({ sessionToken: session.sessionToken }, { $set: session }, { returnDocument: \"after\" });\n                return from(updatedSession);\n            }\n            catch (e_11) {\n                env_11.error = e_11;\n                env_11.hasError = true;\n            }\n            finally {\n                const result_11 = __disposeResources(env_11);\n                if (result_11)\n                    await result_11;\n            }\n        },\n        async deleteSession(sessionToken) {\n            const env_12 = { stack: [], error: void 0, hasError: false };\n            try {\n                const db = __addDisposableResource(env_12, await getDb(), true);\n                const session = await db.S.findOneAndDelete({\n                    sessionToken,\n                });\n                return from(session);\n            }\n            catch (e_12) {\n                env_12.error = e_12;\n                env_12.hasError = true;\n            }\n            finally {\n                const result_12 = __disposeResources(env_12);\n                if (result_12)\n                    await result_12;\n            }\n        },\n        async createVerificationToken(data) {\n            const env_13 = { stack: [], error: void 0, hasError: false };\n            try {\n                const db = __addDisposableResource(env_13, await getDb(), true);\n                await db.V.insertOne(to(data));\n                return data;\n            }\n            catch (e_13) {\n                env_13.error = e_13;\n                env_13.hasError = true;\n            }\n            finally {\n                const result_13 = __disposeResources(env_13);\n                if (result_13)\n                    await result_13;\n            }\n        },\n        async useVerificationToken(identifier_token) {\n            const env_14 = { stack: [], error: void 0, hasError: false };\n            try {\n                const db = __addDisposableResource(env_14, await getDb(), true);\n                const verificationToken = await db.V.findOneAndDelete(identifier_token);\n                if (!verificationToken)\n                    return null;\n                const { _id, ...rest } = verificationToken;\n                return rest;\n            }\n            catch (e_14) {\n                env_14.error = e_14;\n                env_14.hasError = true;\n            }\n            finally {\n                const result_14 = __disposeResources(env_14);\n                if (result_14)\n                    await result_14;\n            }\n        },\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGF1dGgvbW9uZ29kYi1hZGFwdGVyL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsK0JBQStCLFNBQUksSUFBSSxTQUFJO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qiw4Q0FBOEM7QUFDdkU7QUFDQTtBQUNBLHlCQUF5QixhQUFhO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixTQUFJLElBQUksU0FBSTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJGQUEyRixTQUFTLGdCQUFnQjtBQUNwSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLGdCQUFnQixxRkFBcUY7QUFDckc7QUFDQTtBQUNBLGtCQUFrQixtQkFBbUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ087QUFDUDtBQUNBLG1CQUFtQiw2Q0FBUTtBQUMzQixlQUFlLDZDQUFRO0FBQ3ZCO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZUFBZTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mb29kLWRlbGl2ZXJ5Ly4vbm9kZV9tb2R1bGVzL0BhdXRoL21vbmdvZGItYWRhcHRlci9pbmRleC5qcz80N2QxIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBfX2FkZERpc3Bvc2FibGVSZXNvdXJjZSA9ICh0aGlzICYmIHRoaXMuX19hZGREaXNwb3NhYmxlUmVzb3VyY2UpIHx8IGZ1bmN0aW9uIChlbnYsIHZhbHVlLCBhc3luYykge1xuICAgIGlmICh2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHZhbHVlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3QgZXhwZWN0ZWQuXCIpO1xuICAgICAgICB2YXIgZGlzcG9zZTtcbiAgICAgICAgaWYgKGFzeW5jKSB7XG4gICAgICAgICAgICBpZiAoIVN5bWJvbC5hc3luY0Rpc3Bvc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNEaXNwb3NlIGlzIG5vdCBkZWZpbmVkLlwiKTtcbiAgICAgICAgICAgIGRpc3Bvc2UgPSB2YWx1ZVtTeW1ib2wuYXN5bmNEaXNwb3NlXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGlzcG9zZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBpZiAoIVN5bWJvbC5kaXNwb3NlKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmRpc3Bvc2UgaXMgbm90IGRlZmluZWQuXCIpO1xuICAgICAgICAgICAgZGlzcG9zZSA9IHZhbHVlW1N5bWJvbC5kaXNwb3NlXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGRpc3Bvc2UgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk9iamVjdCBub3QgZGlzcG9zYWJsZS5cIik7XG4gICAgICAgIGVudi5zdGFjay5wdXNoKHsgdmFsdWU6IHZhbHVlLCBkaXNwb3NlOiBkaXNwb3NlLCBhc3luYzogYXN5bmMgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGFzeW5jKSB7XG4gICAgICAgIGVudi5zdGFjay5wdXNoKHsgYXN5bmM6IHRydWUgfSk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn07XG52YXIgX19kaXNwb3NlUmVzb3VyY2VzID0gKHRoaXMgJiYgdGhpcy5fX2Rpc3Bvc2VSZXNvdXJjZXMpIHx8IChmdW5jdGlvbiAoU3VwcHJlc3NlZEVycm9yKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChlbnYpIHtcbiAgICAgICAgZnVuY3Rpb24gZmFpbChlKSB7XG4gICAgICAgICAgICBlbnYuZXJyb3IgPSBlbnYuaGFzRXJyb3IgPyBuZXcgU3VwcHJlc3NlZEVycm9yKGUsIGVudi5lcnJvciwgXCJBbiBlcnJvciB3YXMgc3VwcHJlc3NlZCBkdXJpbmcgZGlzcG9zYWwuXCIpIDogZTtcbiAgICAgICAgICAgIGVudi5oYXNFcnJvciA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgICAgICAgIHdoaWxlIChlbnYuc3RhY2subGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlYyA9IGVudi5zdGFjay5wb3AoKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gcmVjLmRpc3Bvc2UgJiYgcmVjLmRpc3Bvc2UuY2FsbChyZWMudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVjLmFzeW5jKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCkudGhlbihuZXh0LCBmdW5jdGlvbihlKSB7IGZhaWwoZSk7IHJldHVybiBuZXh0KCk7IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBmYWlsKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlbnYuaGFzRXJyb3IpIHRocm93IGVudi5lcnJvcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV4dCgpO1xuICAgIH07XG59KSh0eXBlb2YgU3VwcHJlc3NlZEVycm9yID09PSBcImZ1bmN0aW9uXCIgPyBTdXBwcmVzc2VkRXJyb3IgOiBmdW5jdGlvbiAoZXJyb3IsIHN1cHByZXNzZWQsIG1lc3NhZ2UpIHtcbiAgICB2YXIgZSA9IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICByZXR1cm4gZS5uYW1lID0gXCJTdXBwcmVzc2VkRXJyb3JcIiwgZS5lcnJvciA9IGVycm9yLCBlLnN1cHByZXNzZWQgPSBzdXBwcmVzc2VkLCBlO1xufSk7XG4vKipcbiAqIDxkaXYgc3R5bGU9e3tkaXNwbGF5OiBcImZsZXhcIiwganVzdGlmeUNvbnRlbnQ6IFwic3BhY2UtYmV0d2VlblwiLCBhbGlnbkl0ZW1zOiBcImNlbnRlclwiLCBwYWRkaW5nOiAxNn19PlxuICogIDxwPk9mZmljaWFsIDxhIGhyZWY9XCJodHRwczovL3d3dy5tb25nb2RiLmNvbVwiPk1vbmdvREI8L2E+IGFkYXB0ZXIgZm9yIEF1dGguanMgLyBOZXh0QXV0aC5qcy48L3A+XG4gKiAgPGEgaHJlZj1cImh0dHBzOi8vd3d3Lm1vbmdvZGIuY29tXCI+XG4gKiAgIDxpbWcgc3R5bGU9e3tkaXNwbGF5OiBcImJsb2NrXCJ9fSBzcmM9XCJodHRwczovL2F1dGhqcy5kZXYvaW1nL2FkYXB0ZXJzL21vbmdvZGIuc3ZnXCIgd2lkdGg9XCIzMFwiIC8+XG4gKiAgPC9hPlxuICogPC9kaXY+XG4gKlxuICogIyMgSW5zdGFsbGF0aW9uXG4gKlxuICogYGBgYmFzaCBucG0yeWFyblxuICogbnBtIGluc3RhbGwgQGF1dGgvbW9uZ29kYi1hZGFwdGVyIG1vbmdvZGJcbiAqIGBgYFxuICpcbiAqIEBtb2R1bGUgQGF1dGgvbW9uZ29kYi1hZGFwdGVyXG4gKi9cbmltcG9ydCB7IE9iamVjdElkIH0gZnJvbSBcIm1vbmdvZGJcIjtcbi8qKlxuICogVGhpcyBhZGFwdGVyIHVzZXMgaHR0cHM6Ly93d3cudHlwZXNjcmlwdGxhbmcub3JnL2RvY3MvaGFuZGJvb2svcmVsZWFzZS1ub3Rlcy90eXBlc2NyaXB0LTUtMi5odG1sI3VzaW5nLWRlY2xhcmF0aW9ucy1hbmQtZXhwbGljaXQtcmVzb3VyY2UtbWFuYWdlbWVudC5cbiAqIFRoaXMgZmVhdHVyZSBpcyB2ZXJ5IG5ldyBhbmQgcmVxdWlyZXMgcnVudGltZSBwb2x5ZmlsbHMgZm9yIGBTeW1ib2wuYXN5bmNEaXNwb3NlYCBpbiBvcmRlciB0byB3b3JrIHByb3Blcmx5IGluIGFsbCBlbnZpcm9ubWVudHMuXG4gKiBJdCBpcyBhbHNvIHJlcXVpcmVkIHRvIHNldCBpbiB0aGUgYHRzY29uZmlnLmpzb25gIGZpbGUgdGhlIGNvbXBpbGF0aW9uIHRhcmdldCB0byBgZXMyMDIyYCBvciBiZWxvdyBhbmQgY29uZmlndXJlIHRoZSBgbGliYCBvcHRpb24gdG8gaW5jbHVkZSBgZXNuZXh0YCBvciBgZXNuZXh0LmRpc3Bvc2FibGVgLlxuICpcbiAqIFlvdSBjYW4gZmluZCBtb3JlIGluZm9ybWF0aW9uIGFib3V0IHRoaXMgZmVhdHVyZSBhbmQgdGhlIHBvbHlmaWxscyBpbiB0aGUgbGluayBhYm92ZS5cbiAqL1xuLy8gQHRzLWV4cGVjdC1lcnJvciByZWFkIG9ubHkgcHJvcGVydHkgaXMgbm90IGFzc2lnbmFibGVcblN5bWJvbC5hc3luY0Rpc3Bvc2UgPz8gKFN5bWJvbC5hc3luY0Rpc3Bvc2UgPSBTeW1ib2woXCJTeW1ib2wuYXN5bmNEaXNwb3NlXCIpKTtcbmV4cG9ydCBjb25zdCBkZWZhdWx0Q29sbGVjdGlvbnMgPSB7XG4gICAgVXNlcnM6IFwidXNlcnNcIixcbiAgICBBY2NvdW50czogXCJhY2NvdW50c1wiLFxuICAgIFNlc3Npb25zOiBcInNlc3Npb25zXCIsXG4gICAgVmVyaWZpY2F0aW9uVG9rZW5zOiBcInZlcmlmaWNhdGlvbl90b2tlbnNcIixcbn07XG5leHBvcnQgY29uc3QgZm9ybWF0ID0ge1xuICAgIC8qKiBUYWtlcyBhIE1vbmdvREIgb2JqZWN0IGFuZCByZXR1cm5zIGEgcGxhaW4gb2xkIEphdmFTY3JpcHQgb2JqZWN0ICovXG4gICAgZnJvbShvYmplY3QpIHtcbiAgICAgICAgY29uc3QgbmV3T2JqZWN0ID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIG9iamVjdCkge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBvYmplY3Rba2V5XTtcbiAgICAgICAgICAgIGlmIChrZXkgPT09IFwiX2lkXCIpIHtcbiAgICAgICAgICAgICAgICBuZXdPYmplY3QuaWQgPSB2YWx1ZS50b0hleFN0cmluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoa2V5ID09PSBcInVzZXJJZFwiKSB7XG4gICAgICAgICAgICAgICAgbmV3T2JqZWN0W2tleV0gPSB2YWx1ZS50b0hleFN0cmluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3T2JqZWN0W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3T2JqZWN0O1xuICAgIH0sXG4gICAgLyoqIFRha2VzIGEgcGxhaW4gb2xkIEphdmFTY3JpcHQgb2JqZWN0IGFuZCB0dXJucyBpdCBpbnRvIGEgTW9uZ29EQiBvYmplY3QgKi9cbiAgICB0byhvYmplY3QpIHtcbiAgICAgICAgY29uc3QgbmV3T2JqZWN0ID0ge1xuICAgICAgICAgICAgX2lkOiBfaWQob2JqZWN0LmlkKSxcbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IG9iamVjdFtrZXldO1xuICAgICAgICAgICAgaWYgKGtleSA9PT0gXCJ1c2VySWRcIilcbiAgICAgICAgICAgICAgICBuZXdPYmplY3Rba2V5XSA9IF9pZCh2YWx1ZSk7XG4gICAgICAgICAgICBlbHNlIGlmIChrZXkgPT09IFwiaWRcIilcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBuZXdPYmplY3Rba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdPYmplY3Q7XG4gICAgfSxcbn07XG4vKiogQGludGVybmFsICovXG5leHBvcnQgZnVuY3Rpb24gX2lkKGhleCkge1xuICAgIGlmIChoZXg/Lmxlbmd0aCAhPT0gMjQpXG4gICAgICAgIHJldHVybiBuZXcgT2JqZWN0SWQoKTtcbiAgICByZXR1cm4gbmV3IE9iamVjdElkKGhleCk7XG59XG5leHBvcnQgZnVuY3Rpb24gTW9uZ29EQkFkYXB0ZXIoXG4vKipcbiAqIFRoZSBNb25nb0RCIGNsaWVudC4gWW91IGNhbiBlaXRoZXIgcGFzcyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIGBNb25nb0NsaWVudGAgb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSBgTW9uZ29DbGllbnRgLlxuICogVXNpbmcgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBgUHJvbWlzZTxNb25nb0NsaWVudD5gIGNvdWxkIGJlIHVzZWZ1bCBpbiBzZXJ2ZXJsZXNzIGVudmlyb25tZW50cywgcGFydGljdWxhcmx5IHdoZW4gY29tYmluZWQgd2l0aCBgb3B0aW9ucy5vbkNsb3NlYCwgdG8gZWZmaWNpZW50bHkgaGFuZGxlIGRhdGFiYXNlIGNvbm5lY3Rpb25zIGFuZCBhZGRyZXNzIGNoYWxsZW5nZXMgd2l0aCBwZXJzaXN0ZW5jZSwgY29udGFpbmVyIHJldXNlLCBhbmQgY29ubmVjdGlvbiBjbG9zdXJlLlxuICogVGhlc2UgZnVuY3Rpb25zIGVuYWJsZSBlaXRoZXIgc3RyYWlnaHRmb3J3YXJkIG9wZW4tY2xvc2UgZGF0YWJhc2UgY29ubmVjdGlvbnMgb3IgbW9yZSBjb21wbGV4IGNhY2hpbmcgYW5kIGNvbm5lY3Rpb24gcmV1c2Ugc3RyYXRlZ2llcy5cbiAqL1xuY2xpZW50LCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCB7IGNvbGxlY3Rpb25zIH0gPSBvcHRpb25zO1xuICAgIGNvbnN0IHsgZnJvbSwgdG8gfSA9IGZvcm1hdDtcbiAgICBjb25zdCBnZXREYiA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgX2NsaWVudCA9IGF3YWl0ICh0eXBlb2YgY2xpZW50ID09PSBcImZ1bmN0aW9uXCIgPyBjbGllbnQoKSA6IGNsaWVudCk7XG4gICAgICAgIGNvbnN0IF9kYiA9IF9jbGllbnQuZGIob3B0aW9ucy5kYXRhYmFzZU5hbWUpO1xuICAgICAgICBjb25zdCBjID0geyAuLi5kZWZhdWx0Q29sbGVjdGlvbnMsIC4uLmNvbGxlY3Rpb25zIH07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBVOiBfZGIuY29sbGVjdGlvbihjLlVzZXJzKSxcbiAgICAgICAgICAgIEE6IF9kYi5jb2xsZWN0aW9uKGMuQWNjb3VudHMpLFxuICAgICAgICAgICAgUzogX2RiLmNvbGxlY3Rpb24oYy5TZXNzaW9ucyksXG4gICAgICAgICAgICBWOiBfZGIuY29sbGVjdGlvbihjPy5WZXJpZmljYXRpb25Ub2tlbnMpLFxuICAgICAgICAgICAgW1N5bWJvbC5hc3luY0Rpc3Bvc2VdOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgb3B0aW9ucy5vbkNsb3NlPy4oX2NsaWVudCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYXN5bmMgY3JlYXRlVXNlcihkYXRhKSB7XG4gICAgICAgICAgICBjb25zdCBlbnZfMSA9IHsgc3RhY2s6IFtdLCBlcnJvcjogdm9pZCAwLCBoYXNFcnJvcjogZmFsc2UgfTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlciA9IHRvKGRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRiID0gX19hZGREaXNwb3NhYmxlUmVzb3VyY2UoZW52XzEsIGF3YWl0IGdldERiKCksIHRydWUpO1xuICAgICAgICAgICAgICAgIGF3YWl0IGRiLlUuaW5zZXJ0T25lKHVzZXIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmcm9tKHVzZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVfMSkge1xuICAgICAgICAgICAgICAgIGVudl8xLmVycm9yID0gZV8xO1xuICAgICAgICAgICAgICAgIGVudl8xLmhhc0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdF8xID0gX19kaXNwb3NlUmVzb3VyY2VzKGVudl8xKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0XzEpXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHJlc3VsdF8xO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBhc3luYyBnZXRVc2VyKGlkKSB7XG4gICAgICAgICAgICBjb25zdCBlbnZfMiA9IHsgc3RhY2s6IFtdLCBlcnJvcjogdm9pZCAwLCBoYXNFcnJvcjogZmFsc2UgfTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGIgPSBfX2FkZERpc3Bvc2FibGVSZXNvdXJjZShlbnZfMiwgYXdhaXQgZ2V0RGIoKSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IGRiLlUuZmluZE9uZSh7IF9pZDogX2lkKGlkKSB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIXVzZXIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIHJldHVybiBmcm9tKHVzZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVfMikge1xuICAgICAgICAgICAgICAgIGVudl8yLmVycm9yID0gZV8yO1xuICAgICAgICAgICAgICAgIGVudl8yLmhhc0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdF8yID0gX19kaXNwb3NlUmVzb3VyY2VzKGVudl8yKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0XzIpXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHJlc3VsdF8yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBhc3luYyBnZXRVc2VyQnlFbWFpbChlbWFpbCkge1xuICAgICAgICAgICAgY29uc3QgZW52XzMgPSB7IHN0YWNrOiBbXSwgZXJyb3I6IHZvaWQgMCwgaGFzRXJyb3I6IGZhbHNlIH07XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRiID0gX19hZGREaXNwb3NhYmxlUmVzb3VyY2UoZW52XzMsIGF3YWl0IGdldERiKCksIHRydWUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBkYi5VLmZpbmRPbmUoeyBlbWFpbCB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIXVzZXIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIHJldHVybiBmcm9tKHVzZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVfMykge1xuICAgICAgICAgICAgICAgIGVudl8zLmVycm9yID0gZV8zO1xuICAgICAgICAgICAgICAgIGVudl8zLmhhc0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdF8zID0gX19kaXNwb3NlUmVzb3VyY2VzKGVudl8zKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0XzMpXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHJlc3VsdF8zO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBhc3luYyBnZXRVc2VyQnlBY2NvdW50KHByb3ZpZGVyX3Byb3ZpZGVyQWNjb3VudElkKSB7XG4gICAgICAgICAgICBjb25zdCBlbnZfNCA9IHsgc3RhY2s6IFtdLCBlcnJvcjogdm9pZCAwLCBoYXNFcnJvcjogZmFsc2UgfTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGIgPSBfX2FkZERpc3Bvc2FibGVSZXNvdXJjZShlbnZfNCwgYXdhaXQgZ2V0RGIoKSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IGRiLkEuZmluZE9uZShwcm92aWRlcl9wcm92aWRlckFjY291bnRJZCk7XG4gICAgICAgICAgICAgICAgaWYgKCFhY2NvdW50KVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgZGIuVS5maW5kT25lKHsgX2lkOiBuZXcgT2JqZWN0SWQoYWNjb3VudC51c2VySWQpIH0pO1xuICAgICAgICAgICAgICAgIGlmICghdXNlcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZyb20odXNlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZV80KSB7XG4gICAgICAgICAgICAgICAgZW52XzQuZXJyb3IgPSBlXzQ7XG4gICAgICAgICAgICAgICAgZW52XzQuaGFzRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0XzQgPSBfX2Rpc3Bvc2VSZXNvdXJjZXMoZW52XzQpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRfNClcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcmVzdWx0XzQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIHVwZGF0ZVVzZXIoZGF0YSkge1xuICAgICAgICAgICAgY29uc3QgZW52XzUgPSB7IHN0YWNrOiBbXSwgZXJyb3I6IHZvaWQgMCwgaGFzRXJyb3I6IGZhbHNlIH07XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgX2lkLCAuLi51c2VyIH0gPSB0byhkYXRhKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYiA9IF9fYWRkRGlzcG9zYWJsZVJlc291cmNlKGVudl81LCBhd2FpdCBnZXREYigpLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5VLmZpbmRPbmVBbmRVcGRhdGUoeyBfaWQgfSwgeyAkc2V0OiB1c2VyIH0sIHsgcmV0dXJuRG9jdW1lbnQ6IFwiYWZ0ZXJcIiB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnJvbShyZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVfNSkge1xuICAgICAgICAgICAgICAgIGVudl81LmVycm9yID0gZV81O1xuICAgICAgICAgICAgICAgIGVudl81Lmhhc0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdF81ID0gX19kaXNwb3NlUmVzb3VyY2VzKGVudl81KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0XzUpXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHJlc3VsdF81O1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBhc3luYyBkZWxldGVVc2VyKGlkKSB7XG4gICAgICAgICAgICBjb25zdCBlbnZfNiA9IHsgc3RhY2s6IFtdLCBlcnJvcjogdm9pZCAwLCBoYXNFcnJvcjogZmFsc2UgfTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlcklkID0gX2lkKGlkKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYiA9IF9fYWRkRGlzcG9zYWJsZVJlc291cmNlKGVudl82LCBhd2FpdCBnZXREYigpLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgICAgIGRiLkEuZGVsZXRlTWFueSh7IHVzZXJJZDogdXNlcklkIH0pLFxuICAgICAgICAgICAgICAgICAgICBkYi5TLmRlbGV0ZU1hbnkoeyB1c2VySWQ6IHVzZXJJZCB9KSxcbiAgICAgICAgICAgICAgICAgICAgZGIuVS5kZWxldGVPbmUoeyBfaWQ6IHVzZXJJZCB9KSxcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlXzYpIHtcbiAgICAgICAgICAgICAgICBlbnZfNi5lcnJvciA9IGVfNjtcbiAgICAgICAgICAgICAgICBlbnZfNi5oYXNFcnJvciA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRfNiA9IF9fZGlzcG9zZVJlc291cmNlcyhlbnZfNik7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdF82KVxuICAgICAgICAgICAgICAgICAgICBhd2FpdCByZXN1bHRfNjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgbGlua0FjY291bnQ6IGFzeW5jIChkYXRhKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbnZfNyA9IHsgc3RhY2s6IFtdLCBlcnJvcjogdm9pZCAwLCBoYXNFcnJvcjogZmFsc2UgfTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWNjb3VudCA9IHRvKGRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRiID0gX19hZGREaXNwb3NhYmxlUmVzb3VyY2UoZW52XzcsIGF3YWl0IGdldERiKCksIHRydWUpO1xuICAgICAgICAgICAgICAgIGF3YWl0IGRiLkEuaW5zZXJ0T25lKGFjY291bnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBhY2NvdW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVfNykge1xuICAgICAgICAgICAgICAgIGVudl83LmVycm9yID0gZV83O1xuICAgICAgICAgICAgICAgIGVudl83Lmhhc0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdF83ID0gX19kaXNwb3NlUmVzb3VyY2VzKGVudl83KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0XzcpXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHJlc3VsdF83O1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBhc3luYyB1bmxpbmtBY2NvdW50KHByb3ZpZGVyX3Byb3ZpZGVyQWNjb3VudElkKSB7XG4gICAgICAgICAgICBjb25zdCBlbnZfOCA9IHsgc3RhY2s6IFtdLCBlcnJvcjogdm9pZCAwLCBoYXNFcnJvcjogZmFsc2UgfTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGIgPSBfX2FkZERpc3Bvc2FibGVSZXNvdXJjZShlbnZfOCwgYXdhaXQgZ2V0RGIoKSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IGRiLkEuZmluZE9uZUFuZERlbGV0ZShwcm92aWRlcl9wcm92aWRlckFjY291bnRJZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZyb20oYWNjb3VudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZV84KSB7XG4gICAgICAgICAgICAgICAgZW52XzguZXJyb3IgPSBlXzg7XG4gICAgICAgICAgICAgICAgZW52XzguaGFzRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0XzggPSBfX2Rpc3Bvc2VSZXNvdXJjZXMoZW52XzgpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRfOClcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcmVzdWx0Xzg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGdldFNlc3Npb25BbmRVc2VyKHNlc3Npb25Ub2tlbikge1xuICAgICAgICAgICAgY29uc3QgZW52XzkgPSB7IHN0YWNrOiBbXSwgZXJyb3I6IHZvaWQgMCwgaGFzRXJyb3I6IGZhbHNlIH07XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRiID0gX19hZGREaXNwb3NhYmxlUmVzb3VyY2UoZW52XzksIGF3YWl0IGdldERiKCksIHRydWUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBkYi5TLmZpbmRPbmUoeyBzZXNzaW9uVG9rZW4gfSk7XG4gICAgICAgICAgICAgICAgaWYgKCFzZXNzaW9uKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgZGIuVS5maW5kT25lKHsgX2lkOiBuZXcgT2JqZWN0SWQoc2Vzc2lvbi51c2VySWQpIH0pO1xuICAgICAgICAgICAgICAgIGlmICghdXNlcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdXNlcjogZnJvbSh1c2VyKSxcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbjogZnJvbShzZXNzaW9uKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVfOSkge1xuICAgICAgICAgICAgICAgIGVudl85LmVycm9yID0gZV85O1xuICAgICAgICAgICAgICAgIGVudl85Lmhhc0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdF85ID0gX19kaXNwb3NlUmVzb3VyY2VzKGVudl85KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0XzkpXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHJlc3VsdF85O1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBhc3luYyBjcmVhdGVTZXNzaW9uKGRhdGEpIHtcbiAgICAgICAgICAgIGNvbnN0IGVudl8xMCA9IHsgc3RhY2s6IFtdLCBlcnJvcjogdm9pZCAwLCBoYXNFcnJvcjogZmFsc2UgfTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IHRvKGRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRiID0gX19hZGREaXNwb3NhYmxlUmVzb3VyY2UoZW52XzEwLCBhd2FpdCBnZXREYigpLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBkYi5TLmluc2VydE9uZShzZXNzaW9uKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnJvbShzZXNzaW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlXzEwKSB7XG4gICAgICAgICAgICAgICAgZW52XzEwLmVycm9yID0gZV8xMDtcbiAgICAgICAgICAgICAgICBlbnZfMTAuaGFzRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0XzEwID0gX19kaXNwb3NlUmVzb3VyY2VzKGVudl8xMCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdF8xMClcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcmVzdWx0XzEwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBhc3luYyB1cGRhdGVTZXNzaW9uKGRhdGEpIHtcbiAgICAgICAgICAgIGNvbnN0IGVudl8xMSA9IHsgc3RhY2s6IFtdLCBlcnJvcjogdm9pZCAwLCBoYXNFcnJvcjogZmFsc2UgfTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBfaWQsIC4uLnNlc3Npb24gfSA9IHRvKGRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRiID0gX19hZGREaXNwb3NhYmxlUmVzb3VyY2UoZW52XzExLCBhd2FpdCBnZXREYigpLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkU2Vzc2lvbiA9IGF3YWl0IGRiLlMuZmluZE9uZUFuZFVwZGF0ZSh7IHNlc3Npb25Ub2tlbjogc2Vzc2lvbi5zZXNzaW9uVG9rZW4gfSwgeyAkc2V0OiBzZXNzaW9uIH0sIHsgcmV0dXJuRG9jdW1lbnQ6IFwiYWZ0ZXJcIiB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnJvbSh1cGRhdGVkU2Vzc2lvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZV8xMSkge1xuICAgICAgICAgICAgICAgIGVudl8xMS5lcnJvciA9IGVfMTE7XG4gICAgICAgICAgICAgICAgZW52XzExLmhhc0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdF8xMSA9IF9fZGlzcG9zZVJlc291cmNlcyhlbnZfMTEpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRfMTEpXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHJlc3VsdF8xMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgZGVsZXRlU2Vzc2lvbihzZXNzaW9uVG9rZW4pIHtcbiAgICAgICAgICAgIGNvbnN0IGVudl8xMiA9IHsgc3RhY2s6IFtdLCBlcnJvcjogdm9pZCAwLCBoYXNFcnJvcjogZmFsc2UgfTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGIgPSBfX2FkZERpc3Bvc2FibGVSZXNvdXJjZShlbnZfMTIsIGF3YWl0IGdldERiKCksIHRydWUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBkYi5TLmZpbmRPbmVBbmREZWxldGUoe1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uVG9rZW4sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZyb20oc2Vzc2lvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZV8xMikge1xuICAgICAgICAgICAgICAgIGVudl8xMi5lcnJvciA9IGVfMTI7XG4gICAgICAgICAgICAgICAgZW52XzEyLmhhc0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdF8xMiA9IF9fZGlzcG9zZVJlc291cmNlcyhlbnZfMTIpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRfMTIpXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHJlc3VsdF8xMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgY3JlYXRlVmVyaWZpY2F0aW9uVG9rZW4oZGF0YSkge1xuICAgICAgICAgICAgY29uc3QgZW52XzEzID0geyBzdGFjazogW10sIGVycm9yOiB2b2lkIDAsIGhhc0Vycm9yOiBmYWxzZSB9O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYiA9IF9fYWRkRGlzcG9zYWJsZVJlc291cmNlKGVudl8xMywgYXdhaXQgZ2V0RGIoKSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgZGIuVi5pbnNlcnRPbmUodG8oZGF0YSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVfMTMpIHtcbiAgICAgICAgICAgICAgICBlbnZfMTMuZXJyb3IgPSBlXzEzO1xuICAgICAgICAgICAgICAgIGVudl8xMy5oYXNFcnJvciA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRfMTMgPSBfX2Rpc3Bvc2VSZXNvdXJjZXMoZW52XzEzKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0XzEzKVxuICAgICAgICAgICAgICAgICAgICBhd2FpdCByZXN1bHRfMTM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIHVzZVZlcmlmaWNhdGlvblRva2VuKGlkZW50aWZpZXJfdG9rZW4pIHtcbiAgICAgICAgICAgIGNvbnN0IGVudl8xNCA9IHsgc3RhY2s6IFtdLCBlcnJvcjogdm9pZCAwLCBoYXNFcnJvcjogZmFsc2UgfTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGIgPSBfX2FkZERpc3Bvc2FibGVSZXNvdXJjZShlbnZfMTQsIGF3YWl0IGdldERiKCksIHRydWUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHZlcmlmaWNhdGlvblRva2VuID0gYXdhaXQgZGIuVi5maW5kT25lQW5kRGVsZXRlKGlkZW50aWZpZXJfdG9rZW4pO1xuICAgICAgICAgICAgICAgIGlmICghdmVyaWZpY2F0aW9uVG9rZW4pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgX2lkLCAuLi5yZXN0IH0gPSB2ZXJpZmljYXRpb25Ub2tlbjtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlXzE0KSB7XG4gICAgICAgICAgICAgICAgZW52XzE0LmVycm9yID0gZV8xNDtcbiAgICAgICAgICAgICAgICBlbnZfMTQuaGFzRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0XzE0ID0gX19kaXNwb3NlUmVzb3VyY2VzKGVudl8xNCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdF8xNClcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcmVzdWx0XzE0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgIH07XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@auth/mongodb-adapter/index.js\n");

/***/ })

};
;